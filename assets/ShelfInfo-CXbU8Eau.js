import{a as m,Y as x,w as D,y as e,A as l,F,a1 as $,Z as I,o as N,x as v,D as i,I as f,M,J as T,K as z,B as A,a5 as S,a6 as U}from"./vendor-BfugLu_u.js";import{g,d as J}from"./book-jZnHXmFu.js";import"./request-B-Avm3cl.js";import"./index-nOFdZBZ9.js";const K=v("span",null,"你确定要删除吗？",-1),Y={class:"dialog-footer"},L={__name:"ShelfInfo",setup(Z){const n=m([]),s=m(!1),d=m(),c=m({bname:""}),_=async()=>{let o="";n.value=(await g(o)).data.data,console.log(n.value),console.log("BookFrom.bname:"+c.value.bname)},k=()=>{console.log(d.value),J(d.value).then(o=>{if(o.data.state>300){f({message:"删除失败",type:"error",plain:!0});return}f({message:"删除成功",type:"success",plain:!0}),s.value=!1,d.value=null,_()})},h=async()=>{const o=c.value.bname;try{n.value=(await g(o)).data.data,console.log(n.value)}catch(a){console.error("Error fetching book data:",a)}},y=(o,a)=>{s.value=!0,d.value=a.ono};return x(()=>{_()}),(o,a)=>{const r=M,w=$,B=T,p=z,E=A,b=I,u=S,C=U;return N(),D(F,null,[e(w,{modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=t=>s.value=t),title:"提示",width:"500"},{footer:l(()=>[v("div",Y,[e(r,{onClick:a[0]||(a[0]=t=>s.value=!1)},{default:l(()=>[i("取消")]),_:1}),e(r,{onClick:k,type:"primary"},{default:l(()=>[i(" 确认 ")]),_:1})])]),default:l(()=>[K]),_:1},8,["modelValue"]),e(b,null,{default:l(()=>[e(E,{"label-position":"right","label-width":"auto"},{default:l(()=>[e(p,{label:"搜索："},{default:l(()=>[e(B,{modelValue:c.value.bname,"onUpdate:modelValue":a[2]||(a[2]=t=>c.value.bname=t),style:{width:"500px"},placeholder:"请输入书名",clearable:""},null,8,["modelValue"])]),_:1}),e(p,null,{default:l(()=>[e(r,{type:"primary",onClick:h},{default:l(()=>[i("搜索")]),_:1})]),_:1})]),_:1})]),_:1}),e(b,null,{default:l(()=>[e(C,{data:n.value,height:"850",style:{width:"100%"},sortable:""},{default:l(()=>[e(u,{align:"center",sortable:"",label:"图书编号",width:"200",prop:"bno"}),e(u,{align:"center",label:"书名",width:"200",prop:"btitle"}),e(u,{align:"center",label:"类型",width:"200",prop:"btype"}),e(u,{align:"center",sortable:"",label:"数量（本）",width:"200",prop:"bnumber"}),e(u,{align:"center",label:"操作"},{default:l(t=>[e(r,{size:"small",onClick:V=>o.handleEdit2(t.$index,t.row)},{default:l(()=>[i(" 编辑")]),_:2},1032,["onClick"]),e(r,{size:"small",type:"danger",onClick:V=>y(t.$index,t.row)},{default:l(()=>[i(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})],64)}}};export{L as default};
