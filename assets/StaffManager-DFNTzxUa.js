import{r as s,eP as A,c as E,d as e,w as l,F as G,eU as H,eQ as Q,o as S,b as d,f as n,h as b,l as W,i as X,j as Y,eV as Z,eW as q,E as J,eX as K,eY as L,eZ as O,p as ee,g as ae}from"./index-Bwo7isz5.js";/* empty css                *//* empty css                   */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                     *//* empty css               *//* empty css                     *//* empty css                 */import"./request-Be5Tglh4.js";import{g as le,a as U,d as te,u as oe}from"./staff-C7HcmbAu.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";const k=v=>(ee("data-v-6692585e"),v=v(),ae(),v),se=k(()=>d("span",null,"你确定要删除吗？",-1)),de={class:"dialog-footer"},ue={class:"search"},ie={class:"byname"},re=k(()=>d("span",null,"姓名",-1)),pe={class:"byphone"},me=k(()=>d("span",null,"邮箱",-1)),_e={class:"table"},fe={key:0},ce={key:1},ve={__name:"StaffManager",setup(v){const g=s([]),_=s(!1),h=s(!1),y=s(),w=s(),o=s({sname:"",sgender:"",sphone:"",semail:""}),i=s(""),r=s(""),B=async()=>{if(!(i.value==""&&r.value=="")){if(i.value!=""){g.value=(await U(i.value)).data.data;return}if(r.value!=""){g.value=(await U(r.value)).data.data;return}}},z=()=>{i.value="",r.value="",V()},V=async()=>{g.value=(await le()).data.data},I=()=>{te(y.value).then(p=>{p.data.state>300&&b({message:"删除失败",type:"error",plain:!0}),b({message:"删除成功",type:"success",plain:!0}),_.value=!1,y.value=null,V()})},N=()=>{console.log(w),console.log(o.value),oe(w.value,o.value).then(p=>{if(p.data.state>300){b({message:"修改失败",type:"error",plain:!0});return}b({message:"修改成功",type:"success",plain:!0}),h.value=!1,V()})},D=(p,a)=>{_.value=!0,y.value=a.sno},F=(p,a)=>{w.value=a.sno,o.value.semail=a.semail,o.value.sname=a.sname,o.value.sphone=a.sphone,o.value.sgender=a.sgender,h.value=!0};return A(()=>{V()}),(p,a)=>{const u=W,C=H,f=X,c=Y,x=Z,$=q,M=J,P=K,m=L,R=O,T=Q;return S(),E(G,null,[e(C,{modelValue:_.value,"onUpdate:modelValue":a[1]||(a[1]=t=>_.value=t),title:"提示",width:"500"},{footer:l(()=>[d("div",de,[e(u,{onClick:a[0]||(a[0]=t=>_.value=!1)},{default:l(()=>[n("取消")]),_:1}),e(u,{onClick:I,type:"primary"},{default:l(()=>[n(" 确认 ")]),_:1})])]),default:l(()=>[se]),_:1},8,["modelValue"]),e(C,{modelValue:h.value,"onUpdate:modelValue":a[6]||(a[6]=t=>h.value=t),title:"修改员工信息",width:"500"},{default:l(()=>[e(M,{model:o.value,"label-position":"right","label-width":"auto"},{default:l(()=>[e(c,{label:"名称"},{default:l(()=>[e(f,{modelValue:o.value.sname,"onUpdate:modelValue":a[2]||(a[2]=t=>o.value.sname=t),placeholder:"请输入你的名字",clearable:""},null,8,["modelValue"])]),_:1}),e(c,{label:"手机号"},{default:l(()=>[e(f,{modelValue:o.value.sphone,"onUpdate:modelValue":a[3]||(a[3]=t=>o.value.sphone=t),placeholder:"请输入你的手机号",clearable:""},null,8,["modelValue"])]),_:1}),e(c,{label:"电子邮件"},{default:l(()=>[e(f,{modelValue:o.value.semail,"onUpdate:modelValue":a[4]||(a[4]=t=>o.value.semail=t),placeholder:"请输入你的邮件号",clearable:""},null,8,["modelValue"])]),_:1}),e(c,{label:"性别"},{default:l(()=>[e($,{modelValue:o.value.sgender,"onUpdate:modelValue":a[5]||(a[5]=t=>o.value.sgender=t)},{default:l(()=>[e(x,{value:"1",size:"large"},{default:l(()=>[n("男")]),_:1}),e(x,{value:"0",size:"large"},{default:l(()=>[n("女")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(c,null,{default:l(()=>[e(u,{type:"primary",onClick:N},{default:l(()=>[n("确认")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(T,null,{default:l(()=>[e(P,null,{default:l(()=>[d("div",ue,[d("div",ie,[re,e(f,{modelValue:i.value,"onUpdate:modelValue":a[7]||(a[7]=t=>i.value=t),style:{width:"240px"},placeholder:"请输入姓名"},null,8,["modelValue"])]),d("div",pe,[me,e(f,{modelValue:r.value,"onUpdate:modelValue":a[8]||(a[8]=t=>r.value=t),style:{width:"240px"},placeholder:"请输入电子邮箱"},null,8,["modelValue"]),e(u,{type:"primary",size:"default",onClick:B},{default:l(()=>[n("搜索")]),_:1}),e(u,{type:"warning",size:"default",onClick:z},{default:l(()=>[n("清空")]),_:1})])])]),_:1}),d("div",_e,[e(R,{data:g.value,height:"850",style:{width:"100%"}},{default:l(()=>[e(m,{align:"center",sortable:"",label:"员工编号",width:"180",prop:"sno"}),e(m,{align:"center",label:"姓名",width:"180",prop:"sname"}),e(m,{align:"center",label:"性别",width:"180",prop:"sgender"},{default:l(t=>[t.row.sgender==1?(S(),E("span",fe,"男")):(S(),E("span",ce,"女"))]),_:1}),e(m,{align:"center",label:"电话",width:"180",prop:"sphone"}),e(m,{align:"center",label:"电子邮件",width:"350",prop:"semail"}),e(m,{align:"center",label:"操作"},{default:l(t=>[e(u,{size:"small",onClick:j=>F(t.$index,t.row)},{default:l(()=>[n(" 编辑")]),_:2},1032,["onClick"]),e(u,{size:"small",type:"danger",onClick:j=>D(t.$index,t.row)},{default:l(()=>[n(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1})],64)}}},Be=ne(ve,[["__scopeId","data-v-6692585e"]]);export{Be as default};
