import{a as u,Y as N,w as $,y as e,A as l,F as I,a1 as T,Z as U,o as M,x as k,D as d,I as m,M as z,J as A,K as J,B as K,a5 as Y,a6 as Z}from"./vendor-BfugLu_u.js";import{a as w,b as j,c as q}from"./book-jZnHXmFu.js";import"./request-B-Avm3cl.js";import"./index-nOFdZBZ9.js";const G=k("span",null,"你确定要删除吗？",-1),H={class:"dialog-footer"},W={__name:"BookTypeInfo",setup(L){const i=u([]),r=u(!1),p=u(!1),c=u(),y=u(),n=u({shelftype:"",type:""}),_=async()=>{let o="";i.value=(await w(o)).data.data},E=()=>{j(c.value).then(o=>{if(o.data.state>300){m({message:"删除失败",type:"error",plain:!0});return}m({message:"删除成功",type:"success",plain:!0}),r.value=!1,c.value=null,_()})},C=async()=>{const o=n.value.type;try{i.value=(await w(o)).data.data,console.log(i.value)}catch(t){console.error("Error  book :",t)}},S=()=>{q(y.value,n.value).then(o=>{if(o.data.state>300){m({message:"修改失败",type:"error",plain:!0});return}m({message:"修改成功",type:"success",plain:!0}),p.value=!1,_()})},x=(o,t)=>{y.value=t.shelfno,n.value.shelftype=t.shelftype,p.value=!0},B=(o,t)=>{r.value=!0,c.value=t.shelfno};return N(()=>{_()}),(o,t)=>{const s=z,v=T,b=A,f=J,g=K,V=U,h=Y,D=Z;return M(),$(I,null,[e(v,{modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=a=>r.value=a),title:"提示",width:"500"},{footer:l(()=>[k("div",H,[e(s,{onClick:t[0]||(t[0]=a=>r.value=!1)},{default:l(()=>[d("取消")]),_:1}),e(s,{onClick:E,type:"primary"},{default:l(()=>[d(" 确认 ")]),_:1})])]),default:l(()=>[G]),_:1},8,["modelValue"]),e(V,null,{default:l(()=>[e(g,{"label-position":"right","label-width":"auto"},{default:l(()=>[e(f,{label:"搜索："},{default:l(()=>[e(b,{modelValue:n.value.type,"onUpdate:modelValue":t[2]||(t[2]=a=>n.value.type=a),style:{width:"500px"},placeholder:"类型",clearable:""},null,8,["modelValue"])]),_:1}),e(f,null,{default:l(()=>[e(s,{type:"primary",onClick:C},{default:l(()=>[d("搜索")]),_:1})]),_:1})]),_:1})]),_:1}),e(v,{modelValue:p.value,"onUpdate:modelValue":t[4]||(t[4]=a=>p.value=a),title:"修改vip顾客信息",width:"500"},{default:l(()=>[e(g,{model:n.value,"label-position":"right","label-width":"auto"},{default:l(()=>[e(f,{label:"类型"},{default:l(()=>[e(b,{modelValue:n.value.shelftype,"onUpdate:modelValue":t[3]||(t[3]=a=>n.value.shelftype=a),placeholder:"shelftype",clearable:""},null,8,["modelValue"])]),_:1}),e(f,null,{default:l(()=>[e(s,{type:"primary",onClick:S},{default:l(()=>[d("确认")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(V,null,{default:l(()=>[e(D,{data:i.value,height:"700",style:{width:"100%"},sortable:""},{default:l(()=>[e(h,{align:"center",sortable:"",label:"图书编号",width:"200",prop:"shelfno"}),e(h,{align:"center",label:"类型",width:"200",prop:"shelftype"}),e(h,{align:"center",label:"操作"},{default:l(a=>[e(s,{size:"small",onClick:F=>x(a.$index,a.row)},{default:l(()=>[d(" 编辑")]),_:2},1032,["onClick"]),e(s,{size:"small",type:"danger",onClick:F=>B(a.$index,a.row)},{default:l(()=>[d(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})],64)}}};export{W as default};
