import{a as p,Y as g,c as m,A as t,Z as B,o as r,y as o,w as E,C as U,F as C,D as I,I as b,J as x,K as F,a0 as S,L as w,M as D,B as M,N}from"./vendor-BfugLu_u.js";import{a as A,f as L}from"./book-jZnHXmFu.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-B-Avm3cl.js";import"./index-nOFdZBZ9.js";const K={__name:"BookIncrease",setup(O){const s=p([]),e=p({btitle:"",isbn:"",bauthor:"",bpublisher:"",bdate:"",bprice:"",btype:"",shelfno:"",bnumber:""}),i=async()=>{s.value=(await A("")).data.data,console.log(s.value)},f=()=>{L(e.value).then(d=>{if(d.data.state>300){b({message:"添加失败",type:"error",plain:!0});return}b({message:"添加成功",type:"success",plain:!0})})},c=async d=>{const l=s.value.find(u=>u.shelftype===d);console.log(l),l?e.value.shelfno=l.shelfno:e.value.shelfno=null};return g(()=>{i()}),(d,l)=>{const u=x,n=F,_=S,v=N,V=w,h=D,y=M,k=B;return r(),m(k,{class:"container"},{default:t(()=>[o(y,{model:e.value,"label-position":"right","label-width":"auto"},{default:t(()=>[o(n,{label:"书名"},{default:t(()=>[o(u,{modelValue:e.value.btitle,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.btitle=a),placeholder:"请输入书名",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"isbn"},{default:t(()=>[o(u,{modelValue:e.value.isbn,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.isbn=a),placeholder:"请输入isbn",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"作者"},{default:t(()=>[o(u,{modelValue:e.value.bauthor,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.bauthor=a),placeholder:"请输入作者",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"出版社"},{default:t(()=>[o(u,{modelValue:e.value.bpublisher,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.bpublisher=a),placeholder:"请输入出版社",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"日期"},{default:t(()=>[o(_,{modelValue:e.value.bdate,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.bdate=a),type:"date",placeholder:"选择日期"},null,8,["modelValue"])]),_:1}),o(n,{label:"价格"},{default:t(()=>[o(u,{modelValue:e.value.bprice,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.bprice=a),placeholder:"请输入价格",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"书架类型"},{default:t(()=>[o(V,{modelValue:e.value.btype,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value.btype=a),placeholder:"请选择图书类型",onChange:c},{default:t(()=>[(r(!0),E(C,null,U(s.value,a=>(r(),m(v,{key:a.shelfno,label:a.shelftype,value:a.shelftype},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"书架编号"},{default:t(()=>[o(u,{modelValue:e.value.shelfno,"onUpdate:modelValue":l[7]||(l[7]=a=>e.value.shelfno=a),disabled:""},null,8,["modelValue"])]),_:1}),o(n,{label:"数量"},{default:t(()=>[o(u,{modelValue:e.value.bnumber,"onUpdate:modelValue":l[8]||(l[8]=a=>e.value.bnumber=a),placeholder:"请输入数量",clearable:""},null,8,["modelValue"])]),_:1}),o(n,null,{default:t(()=>[o(h,{type:"primary",onClick:f},{default:t(()=>[I("确认添加")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}},q=J(K,[["__scopeId","data-v-5ede1563"]]);export{q as default};
