import{v as f,a as v,Y as b,c as V,A as o,Z as y,o as A,y as a,D as g,I as t,J as B,K as E,M as x,B as I}from"./vendor-BfugLu_u.js";import{a as C,b as h}from"./admin-De8XhNd_.js";import{u as k}from"./index-nOFdZBZ9.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-B-Avm3cl.js";const M={__name:"AdminPassword",setup(P){const p=k(),m=f(),e=v({ano:"",username:"",password:"",newpassword:"",newnewpassword:""}),u=async()=>{e.value=p.adminInfo,e.value.ano=(await C(e.value.username,e.value.password)).data.data,console.log(e.value)},w=()=>{e.value.newpassword===""||e.value.newpassword===""&&e.value.newnewpassword===""||e.value.newpassword===""?t({message:"请输入密码",type:"error",plain:!0}):e.value.newnewpassword!==e.value.newpassword?t({message:"两次密码不一致",type:"error",plain:!0}):h(e.value.ano,e.value).then(d=>{if(d.data.state>300){t({message:"修改失败",type:"error",plain:!0});return}t({message:"修改成功",type:"success",plain:!0}),m.push("/"),u()})};return b(()=>{u()}),(d,l)=>{const r=B,n=E,i=x,c=I,_=y;return A(),V(_,{width:"500",class:"container"},{default:o(()=>[a(c,{model:e.value,"label-position":"right","label-width":"auto"},{default:o(()=>[a(n,{label:"名字"},{default:o(()=>[a(r,{modelValue:e.value.username,"onUpdate:modelValue":l[0]||(l[0]=s=>e.value.username=s),disabled:"",clearable:""},null,8,["modelValue"])]),_:1}),a(n,{label:"新密码"},{default:o(()=>[a(r,{modelValue:e.value.newpassword,"onUpdate:modelValue":l[1]||(l[1]=s=>e.value.newpassword=s),placeholder:"请输入新密码",clearable:""},null,8,["modelValue"])]),_:1}),a(n,{label:"再次输入密码"},{default:o(()=>[a(r,{modelValue:e.value.newnewpassword,"onUpdate:modelValue":l[2]||(l[2]=s=>e.value.newnewpassword=s),placeholder:"请再输入新密码",clearable:""},null,8,["modelValue"])]),_:1}),a(n,null,{default:o(()=>[a(i,{type:"primary",onClick:w},{default:o(()=>[g("确认修改")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}},R=F(M,[["__scopeId","data-v-e943efb3"]]);export{R as default};
