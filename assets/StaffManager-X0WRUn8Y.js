import{a as s,Y as H,w as S,y as e,A as l,F as P,a1 as J,Z as K,o as E,x as d,D as n,I as b,M as Y,J as Z,K as j,a2 as q,a3 as L,B as O,a4 as Q,a5 as W,a6 as X,G as ee,H as ae}from"./vendor-BfugLu_u.js";import{g as le,a as B,d as te,u as oe}from"./staff-BL6mJRq9.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-B-Avm3cl.js";import"./index-nOFdZBZ9.js";const k=v=>(ee("data-v-6692585e"),v=v(),ae(),v),se=k(()=>d("span",null,"你确定要删除吗？",-1)),de={class:"dialog-footer"},ue={class:"search"},ie={class:"byname"},re=k(()=>d("span",null,"姓名",-1)),pe={class:"byphone"},me=k(()=>d("span",null,"邮箱",-1)),_e={class:"table"},fe={key:0},ce={key:1},ve={__name:"StaffManager",setup(v){const g=s([]),_=s(!1),h=s(!1),y=s(),w=s(),o=s({sname:"",sgender:"",sphone:"",semail:""}),i=s(""),r=s(""),U=async()=>{if(!(i.value==""&&r.value=="")){if(i.value!=""){g.value=(await B(i.value)).data.data;return}if(r.value!=""){g.value=(await B(r.value)).data.data;return}}},I=()=>{i.value="",r.value="",V()},V=async()=>{g.value=(await le()).data.data},z=()=>{te(y.value).then(p=>{p.data.state>300&&b({message:"删除失败",type:"error",plain:!0}),b({message:"删除成功",type:"success",plain:!0}),_.value=!1,y.value=null,V()})},D=()=>{console.log(w),console.log(o.value),oe(w.value,o.value).then(p=>{if(p.data.state>300){b({message:"修改失败",type:"error",plain:!0});return}b({message:"修改成功",type:"success",plain:!0}),h.value=!1,V()})},N=(p,a)=>{_.value=!0,y.value=a.sno},F=(p,a)=>{w.value=a.sno,o.value.semail=a.semail,o.value.sname=a.sname,o.value.sphone=a.sphone,o.value.sgender=a.sgender,h.value=!0};return H(()=>{V()}),(p,a)=>{const u=Y,x=J,f=Z,c=j,C=q,M=L,$=O,R=Q,m=W,T=X,A=K;return E(),S(P,null,[e(x,{modelValue:_.value,"onUpdate:modelValue":a[1]||(a[1]=t=>_.value=t),title:"提示",width:"500"},{footer:l(()=>[d("div",de,[e(u,{onClick:a[0]||(a[0]=t=>_.value=!1)},{default:l(()=>[n("取消")]),_:1}),e(u,{onClick:z,type:"primary"},{default:l(()=>[n(" 确认 ")]),_:1})])]),default:l(()=>[se]),_:1},8,["modelValue"]),e(x,{modelValue:h.value,"onUpdate:modelValue":a[6]||(a[6]=t=>h.value=t),title:"修改员工信息",width:"500"},{default:l(()=>[e($,{model:o.value,"label-position":"right","label-width":"auto"},{default:l(()=>[e(c,{label:"名称"},{default:l(()=>[e(f,{modelValue:o.value.sname,"onUpdate:modelValue":a[2]||(a[2]=t=>o.value.sname=t),placeholder:"请输入你的名字",clearable:""},null,8,["modelValue"])]),_:1}),e(c,{label:"手机号"},{default:l(()=>[e(f,{modelValue:o.value.sphone,"onUpdate:modelValue":a[3]||(a[3]=t=>o.value.sphone=t),placeholder:"请输入你的手机号",clearable:""},null,8,["modelValue"])]),_:1}),e(c,{label:"电子邮件"},{default:l(()=>[e(f,{modelValue:o.value.semail,"onUpdate:modelValue":a[4]||(a[4]=t=>o.value.semail=t),placeholder:"请输入你的邮件号",clearable:""},null,8,["modelValue"])]),_:1}),e(c,{label:"性别"},{default:l(()=>[e(M,{modelValue:o.value.sgender,"onUpdate:modelValue":a[5]||(a[5]=t=>o.value.sgender=t)},{default:l(()=>[e(C,{value:"1",size:"large"},{default:l(()=>[n("男")]),_:1}),e(C,{value:"0",size:"large"},{default:l(()=>[n("女")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(c,null,{default:l(()=>[e(u,{type:"primary",onClick:D},{default:l(()=>[n("确认")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(A,null,{default:l(()=>[e(R,null,{default:l(()=>[d("div",ue,[d("div",ie,[re,e(f,{modelValue:i.value,"onUpdate:modelValue":a[7]||(a[7]=t=>i.value=t),style:{width:"240px"},placeholder:"请输入姓名"},null,8,["modelValue"])]),d("div",pe,[me,e(f,{modelValue:r.value,"onUpdate:modelValue":a[8]||(a[8]=t=>r.value=t),style:{width:"240px"},placeholder:"请输入电子邮箱"},null,8,["modelValue"]),e(u,{type:"primary",size:"default",onClick:U},{default:l(()=>[n("搜索")]),_:1}),e(u,{type:"warning",size:"default",onClick:I},{default:l(()=>[n("清空")]),_:1})])])]),_:1}),d("div",_e,[e(T,{data:g.value,height:"850",style:{width:"100%"}},{default:l(()=>[e(m,{align:"center",sortable:"",label:"员工编号",width:"180",prop:"sno"}),e(m,{align:"center",label:"姓名",width:"180",prop:"sname"}),e(m,{align:"center",label:"性别",width:"180",prop:"sgender"},{default:l(t=>[t.row.sgender==1?(E(),S("span",fe,"男")):(E(),S("span",ce,"女"))]),_:1}),e(m,{align:"center",label:"电话",width:"180",prop:"sphone"}),e(m,{align:"center",label:"电子邮件",width:"350",prop:"semail"}),e(m,{align:"center",label:"操作"},{default:l(t=>[e(u,{size:"small",onClick:G=>F(t.$index,t.row)},{default:l(()=>[n(" 编辑")]),_:2},1032,["onClick"]),e(u,{size:"small",type:"danger",onClick:G=>N(t.$index,t.row)},{default:l(()=>[n(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1})],64)}}},we=ne(ve,[["__scopeId","data-v-6692585e"]]);export{we as default};
