import{r as c,eP as x,c as F,d as e,w as l,F as D,eU as $,eQ as N,o as I,b as v,f as u,h as f,l as T,i as U,j as z,E as M,eY as S,eZ as j}from"./index-BbFHhfAw.js";/* empty css                   */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                     *//* empty css               *//* empty css                *//* empty css                     */import"./request-DdeUMOwH.js";import{g,d as A}from"./book-Bk00LzbV.js";const P=v("span",null,"你确定要删除吗？",-1),Q={class:"dialog-footer"},X={__name:"ShelfInfo",setup(Y){const n=c([]),s=c(!1),d=c(),m=c({bname:""}),p=async()=>{let o="";n.value=(await g(o)).data.data,console.log(n.value),console.log("BookFrom.bname:"+m.value.bname)},h=()=>{console.log(d.value),A(d.value).then(o=>{if(o.data.state>300){f({message:"删除失败",type:"error",plain:!0});return}f({message:"删除成功",type:"success",plain:!0}),s.value=!1,d.value=null,p()})},k=async()=>{const o=m.value.bname;try{n.value=(await g(o)).data.data,console.log(n.value)}catch(t){console.error("Error fetching book data:",t)}},w=(o,t)=>{s.value=!0,d.value=t.ono};return x(()=>{p()}),(o,t)=>{const r=T,y=$,E=U,_=z,B=M,b=N,i=S,C=j;return I(),F(D,null,[e(y,{modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=a=>s.value=a),title:"提示",width:"500"},{footer:l(()=>[v("div",Q,[e(r,{onClick:t[0]||(t[0]=a=>s.value=!1)},{default:l(()=>[u("取消")]),_:1}),e(r,{onClick:h,type:"primary"},{default:l(()=>[u(" 确认 ")]),_:1})])]),default:l(()=>[P]),_:1},8,["modelValue"]),e(b,null,{default:l(()=>[e(B,{"label-position":"right","label-width":"auto"},{default:l(()=>[e(_,{label:"搜索："},{default:l(()=>[e(E,{modelValue:m.value.bname,"onUpdate:modelValue":t[2]||(t[2]=a=>m.value.bname=a),style:{width:"500px"},placeholder:"请输入书名",clearable:""},null,8,["modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(r,{type:"primary",onClick:k},{default:l(()=>[u("搜索")]),_:1})]),_:1})]),_:1})]),_:1}),e(b,null,{default:l(()=>[e(C,{data:n.value,height:"850",style:{width:"100%"},sortable:""},{default:l(()=>[e(i,{align:"center",sortable:"",label:"图书编号",width:"200",prop:"bno"}),e(i,{align:"center",label:"书名",width:"200",prop:"btitle"}),e(i,{align:"center",label:"类型",width:"200",prop:"btype"}),e(i,{align:"center",sortable:"",label:"数量（本）",width:"200",prop:"bnumber"}),e(i,{align:"center",label:"操作"},{default:l(a=>[e(r,{size:"small",onClick:V=>o.handleEdit2(a.$index,a.row)},{default:l(()=>[u(" 编辑")]),_:2},1032,["onClick"]),e(r,{size:"small",type:"danger",onClick:V=>w(a.$index,a.row)},{default:l(()=>[u(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})],64)}}};export{X as default};
